<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Webex++</title>


        <style>
            :root {
                --bg: #f7f8fb;
                --card: #ffffff;
                --muted: #6b7280;
                --accent: #2563eb;
                --danger: #ef4444;
                --radius: 8px;
                --popup-width: 22em;
            }

            body {
                margin: 0;
                padding: 12px;
                width: var(--popup-width);
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    "Helvetica Neue", Arial;
                background: var(--bg);
                color: #111827;
                -webkit-font-smoothing: antialiased;
            }

            .muted {
                color: var(--muted);
                font-size: 13px;
            }

            .small {
                font-size: 12px;
            }

            .section {
                margin-top: 10px;
            }

            /* Titles and subtitles */
            .subtitle {
                color: var(--muted);
                font-size: 12px;
                margin-top: 6px;
            }

            /* Update banner (hidden by default) */
            #updates-available {
                display: none;
                margin-bottom: 10px;
                padding: 6px;
                border-radius: 6px;
                background: #fff7ed;
                border: 1px solid #ffedd5;
                font-size: 13px;
            }

            /* Button styling */
            input[type="button"],
            button {
                background: var(--accent);
                color: #fff;
                border: 0;
                padding: 8px 10px;
                border-radius: 6px;
                cursor: pointer;
                font-weight: 600;
            }

            input[type="button"]:hover,
            button:hover {
                opacity: 0.95;
            }

            /* Toggle switch styles, written across multiple lines for clarity */
            .toggle {
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .toggle input {
                /* Visually hide the native checkbox; we still keep it for
                     accessibility and state. */
                position: absolute;
                opacity: 0;
                pointer-events: none;
            }

            .toggle .switch {
                width: 42px;
                height: 26px;
                background: #e6e9ef;
                border-radius: 999px;
                position: relative;
                transition: background 180ms ease;
                flex: 0 0 auto;
            }

            .toggle .knob {
                position: absolute;
                left: 3px;
                top: 3px;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background: white;
                box-shadow: 0 2px 6px rgba(2,6,23,0.12);
                transition: transform 180ms ease;
            }

            /* When the checkbox is checked, visually move the knob and tint the track */
            .toggle input:checked + .switch {
                background: var(--accent);
            }

            .toggle input:checked + .switch .knob {
                transform: translateX(16px);
            }

            /* Error box */
            #fail {
                background: #fff1f2;
                border-radius: 6px;
                padding: 8px;
                border: 1px solid rgba(239,68,68,0.12);
                color: var(--danger);
            }

            code#error-message {
                display: block;
                white-space: pre-wrap;
                margin-top: 6px;
                color: #7f1d1d;
            }
        </style>
    </head>

    <body>
        <div>
            <div id="updates-available">
                <a id="updates-link" href="https://github.com/giorgiolongo/webexplusplus">
                    New version available — click to view
                </a>
            </div>

            <div id="errpage" style="display: none;" class="section small">
                <strong>Whoops</strong>
                <div class="muted">This extension only works on the playback page of a Webex meeting recording.</div>
            </div>

            <div id="fail" style="display: none;" class="section">
                <strong>That didn't work</strong>
                <div class="muted">Some error occurred while processing the page. Try refreshing or check extension permissions.</div>
                <div style="margin-top:6px">The following exception was raised:</div>
                <code id="error-message"></code>
            </div>

            <div id="loading" class="section small">
                <strong>Loading</strong>
                <div class="muted">Please wait while I fetch the video stream…</div>
            </div>

            <div id="success" style="display: none;" class="section">
                <div id="content" style="display:none"></div>

                <div id="chat" style="display: none;" class="section">
                    <div class="subtitle">Chat transcript</div>
                    <label>
                        <input checked name="chat" type="radio" id="chat-opt"> Plain text
                    </label>
                    <br>
                    <label>
                        <input name="chat" type="radio" id="json-opt"> JSON format
                    </label>
                    <div style="margin-top:8px">
                        <input id="download" type="button" value="Download" />
                    </div>
                </div>

                <div id="settings" class="section">
                    <div style="display:flex;justify-content:space-between;align-items:center">
                        <div>
                            <div style="font-weight:600">Autohide Sidebar</div>
                            <div class="muted small">Automatically collapse the Webex sidebar on load</div>
                        </div>

                        <label class="toggle">
                            <input id="autohide-sidebar" type="checkbox" checked />
                            <span class="switch" aria-hidden="true"><span class="knob"></span></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <script src="options.js"></script>
        <script src="popup.js"></script>
    </body>
</html>
